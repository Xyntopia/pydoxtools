<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://xyntopia.github.io/pydoxtools/reference/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Reference - Pydoxtools</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Reference";
        var mkdocs_page_input_path = "reference.md";
        var mkdocs_page_url = "/pydoxtools/reference/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Pydoxtools
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../readme_cp/">Readme</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Reference</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#pydoxtools.document">pydoxtools.document</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pydoxtools.document.Document">Document</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document.Document.document_type">document_type</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document.Document.filename">filename</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document.Document.__init__">__init__()</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pydoxtools.document_base">pydoxtools.document_base</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#pydoxtools.document_base.Pipeline">Pipeline</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document_base.Pipeline.x_funcs">x_funcs</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document_base.Pipeline.__getattr__">__getattr__()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document_base.Pipeline.config">config()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document_base.Pipeline.non_interactive_x_funcs">non_interactive_x_funcs()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document_base.Pipeline.pipeline_graph">pipeline_graph()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document_base.Pipeline.pre_cache">pre_cache()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document_base.Pipeline.run_all_extractors">run_all_extractors()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#pydoxtools.document_base.Pipeline.x">x()</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Pydoxtools</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Reference</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="reference">Reference</h1>


<div class="doc doc-object doc-module">


<a id="pydoxtools.document"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pydoxtools.document.Document" class="doc doc-heading">
        <code>Document</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-internal" title="pydoxtools.document_base.Pipeline" href="#pydoxtools.document_base.Pipeline">Pipeline</a></code></p>

  
      <p>This class implements an extensive pipeline using the [][document_base.Pipeline] class
for information extraction from documents.</p>
<hr />
<p>In order to load a document, simply
open it with the document class::</p>
<pre><code>from pydoxtools import Document
doc = Document(fobj=./data/demo.docx)
</code></pre>
<p>You can then access any extracted data by
calling x with the specified member::</p>
<pre><code>doc.x("addresses")
doc.x("entities")
doc.x("full_text")
# etc...
</code></pre>
<p>Most members are also callable like a normal
class member in order to make the code easier to read::</p>
<pre><code>doc.addresses
</code></pre>
<p>A list of all available extraction data
can be called like this::</p>
<pre><code>doc.x_funcs()
</code></pre>
<hr />
<p>The document class is backed by a <em>pipeline</em> class with a pre-defined pipeline focusing on
document extraction tasks. This extraction pipeline can be overwritten partially or completly replaced.
In order to customize the pipeline it is usually best to take the pipeline for
basic documents defined in pydoxtools.Document as a starting point and
only overwrite the parts that should be customized.</p>
<p>inherited classes can override any part of the graph.</p>
<p>It is possible to exchange/override/extend or introduce extraction pipelines for individual file types (including
the generic one: "<em>") such as </em>.html extractors, <em>.pdf, </em>.txt etc..</p>
<p>Strings inside a document class indicate the inclusion of that document type pipeline but with a lower priority
this way a directed extraction graph gets built. This only counts for the current class that is
being defined though!!</p>
<p>Example extension pipeline for an OCR extractor which converts images into text
"image" code block and supports filetypes: ".png", ".jpeg", ".jpg", ".tif", ".tiff"::</p>
<pre><code>"image": [
        OCRExtractor()
        .pipe(file="raw_content")
        .out("ocr_pdf_file")
        .cache(),
    ],
# the first base doc types have priority over the last ones
# so here .png &gt; image &gt; .pdf
".png": ["image", ".pdf"],
".jpeg": ["image", ".pdf"],
".jpg": ["image", ".pdf"],
".tif": ["image", ".pdf"],
".tiff": ["image", ".pdf"],
# the "*" gets overwritten by functions above
"*": [...]
</code></pre>
<p>Each function (or node) in the extraction pipeline gets fed its input-parameters
by the "pipe" command. These parameters can be configured on document creation
if some of them are declared using the "config" command.</p>
<p>These arguments can be overwritten by a new pipeline in inherited documents or document types
that are higher up in the hierarchy. The argument precedence is hereby as follows::</p>
<pre><code>python-class-member &lt; extractor-graph-function &lt; config
</code></pre>



  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pydoxtools.document.Document.document_type" class="doc doc-heading">
<code class="highlight language-python"><span class="n">document_type</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>detect doc type based on file-ending
TODO add a doc-type extractor using for example python-magic</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="pydoxtools.document.Document.filename" class="doc doc-heading">
<code class="highlight language-python"><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>TODO: move this into document</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pydoxtools.document.Document.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">fobj</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">page_numbers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_pages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mime_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">document_type</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  

<details class="fobj">
  <summary>a file object which should be loaded.</summary>
  <ul>
<li>if it is a string or bytes object:   the string itself is the document!</li>
<li>if it is a pathlib.Path: load the document from the path</li>
<li>if it is a file object: load document from file object (or bytestream  etc...)</li>
</ul>
</details>      <p>source: Where does the extracted data come from? (Examples: URL, 'pdfupload', parent-URL, or a path)"
page_numbers: list of the specific pages that we would like to extract (for example in a pdf)
max_pages: maximum number of pages that we want to extract in order to protect resources
config: a dict which describes values for variables in the document logic
mime_type: optional mimetype for the document
filename: optional filename. Helps sometimes helps in determining the purpose of a document</p>

<details class="document_type">
  <summary>directly specify the document type which specifies the extraction</summary>
  <p>logic that should be used</p>
</details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="pydoxtools.document_base"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pydoxtools.document_base.Pipeline" class="doc doc-heading">
        <code>Pipeline</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>This class is the base for all document classes in pydoxtools and
defines a common pipeline interface for all.</p>
<p>This class also defines a basic extraction schema which derived
classes can override</p>



  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="pydoxtools.document_base.Pipeline.x_funcs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">x_funcs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Extractor</span><span class="p">]</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-cached"><code>cached</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>get all extractors and their property names for this specific file type</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="pydoxtools.document_base.Pipeline.__getattr__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__getattr__</span><span class="p">(</span><span class="n">extract_name</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p><strong>getattr</strong> only gets called for non-existing variable names.
So we can automatically avoid name collisions  here.</p>
<blockquote>
<blockquote>
<blockquote>
<p>document.addresses</p>
</blockquote>
</blockquote>
</blockquote>
<p>instead of document.x['addresses']</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pydoxtools.document_base.Pipeline.config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">config</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Set a standard configuration for a pipeline</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pydoxtools.document_base.Pipeline.non_interactive_x_funcs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">non_interactive_x_funcs</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>return all non-interactive extractors</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pydoxtools.document_base.Pipeline.pipeline_graph" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pipeline_graph</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">document_logic_id</span><span class="o">=</span><span class="s1">&#39;current&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Generate a visualization of the defined pipelines</p>
<p>image_path:  file path for a generated image</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pydoxtools.document_base.Pipeline.pre_cache" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pre_cache</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>in some situations, for example for caching purposes it would be nice
to pre-cache all calculations this is done here by simply calling all functions...</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pydoxtools.document_base.Pipeline.run_all_extractors" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run_all_extractors</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>can be used for testing or pre-caching purposes</p>

  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pydoxtools.document_base.Pipeline.x" class="doc doc-heading">
<code class="highlight language-python"><span class="n">x</span><span class="p">(</span><span class="n">extract_name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>call an extractor from our definition
TODO: using <em>args and </em>*kwargs the extractors parameters can be overriden</p>

  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../readme_cp/" class="btn btn-neutral float-left" title="Readme"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../readme_cp/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
